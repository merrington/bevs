<template name="group">
	<h1 class="ui header">{{name}}</h1>
	{{#if isOwner}}
	<div class="ui compact labeled icon button" id="groupSettingsButton">
		<i class="icon wrench"></i> Settings
	</div>
	{{/if}}
	<div class="ui center aligned container">
		<div class="ui grid">
		<div class="eight wide column">
			{{#if voting}}
				<div class="center">
					{{#if hasVoted}}
						<div class="ui positive message">
							<div class="header">
								Vote recorded
							</div>
							<p>Thanks for voting!</p>
							<div class="ui animated blue {{majorityDisabled}} button" id="closeVote">
								<div class="visible content">
									{{votesCounted}} votes submitted
								</div>
								<div class="hidden content">
									Close voting
								</div>
							</div>
						</div>
					{{else}}
						<h3>Voting in progress...</h3>
						<a class="ui primary button" data-trigger="votingModal" id="castVote">Cast vote</a>
					{{/if}}
				</div>
			{{else}}
				<div class="center">
					<h5>Currently no voting in progress</h5>
					<a class="ui primary button" id="startVote">Start a vote</a>
				</div>
			{{/if}}
			{{> voting}}
		</div>
		<div class="eight wide column">
			{{> leaderboard }}
		</div>
	</div>
	</div>
	{{> history}}

	{{> groupSettings}}
</template>

<template name="history">
	<h1 class="ui header">History</h1>
	<div class="row">
		<div class="ui cards">
			{{#each history}}
			<div class="ui card">
				<div class="image">
					{{#with winningBeer totals}}
					<img src="{{image}}">
					{{/with}}
				</div>
				<div class="content">
					{{#with winningBeer totals}}
					<div class="header">{{name}}</div>
					{{/with}}
					<div class="meta">{{formatDate date 'MMM Do YYYY @ h:mma'}}</div>
					<div class="description">
						{{#beerCollection beers=(beerTotals ../beers) imgsize='avatar' header='Vote totals'}}
						<div class="ui label">
							{{beer.total}}
						</div>
						{{/beerCollection}}
					</div>
				</div>
				<div class="extra content">
					<i class="trophy icon"></i>{{winner}}
				</div>
			</div>
			{{/each}}
		</div>
	</div>
</template>
